/* ================= Base / Tokens ================= */
:root{
  --bg:#f7f7fb;
  --card:#fff;
  --muted:#6b7280;
  --line:#e5e7eb;
  --brand:#f59e0b;
  --brand-weak:#f59e0b1a;
  --shadow:0 10px 30px rgba(0,0,0,.08);
  --radius:12px;
}

html,body,#root{height:100%}
body{
  margin:0;
  font:14px/1.45 Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  background:var(--bg);
  color:#111827;
}
.wrap.pretty{max-width:1500px;margin:12px auto;padding:0 8px}

/* ================= Header / KPIs ================= */
.hero{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:12px 0}
.logo{height:44px;width:auto}
.kpis{display:flex;gap:8px;flex-wrap:wrap}
.kpi{background:#fff;border:1px solid #eee;border-radius:10px;padding:6px 10px}
.kpi-label{font-size:11px;opacity:.7}
.kpi-value{font-weight:700}

/* ================= Cards / Chrome ================= */
.card{background:var(--card);border:1px solid #eef2f7;border-radius:12px;padding:8px}
h3.tight{margin:2px 0 6px;font-size:14px}
.muted{color:var(--muted);font-size:12px}

/* ================= Filters (Search + Year/Month) ================= */
.filters-row{display:grid;grid-template-columns:1fr;gap:8px;padding:8px}
.filter-combined{display:grid;grid-template-columns:minmax(320px,1.6fr) minmax(240px,1fr);gap:8px;align-items:center}
@media (max-width:980px){.filter-combined{grid-template-columns:1fr}}

.input-wrap{display:flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:8px;padding:6px 8px;background:#fff}
.input{border:none;outline:none;width:100%;background:transparent}

.chips.tight{display:flex;flex-wrap:wrap;gap:6px}
.chip{border:1px solid var(--line);background:#f9fafb;border-radius:999px;padding:4px 8px;font-size:12px;cursor:pointer}
.chip:hover{background:#f3f4f6}

/* Hide the internal header inside the compact YearMonthPicker */
.ymp-compact .hd,
.ymp-compact .card>.hd,
.ymp-compact .filter-block>.hd{display:none!important}

/* ================= Year & Month picker chrome ================= */
.filter-block{position:relative}
.btn-dropdown{
  display:flex;align-items:center;justify-content:space-between;
  width:100%;padding:8px 12px;font-size:14px;background:#fff;
  border:1px solid var(--line);border-radius:10px;cursor:pointer
}
.btn-dropdown:hover{border-color:#d1d5db}
.btn-dropdown .caret{opacity:.6}
.popover{
  position:absolute;top:100%;left:0;right:0;z-index:1000;margin-top:8px;padding:10px;
  background:#fff;border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);
  max-height:60vh;overflow:auto
}
/* Pills / month */
.month-grid{display:flex;flex-wrap:wrap;gap:6px;margin:6px 0}
.pill{padding:6px 10px;font-size:12px;cursor:pointer;border:1px solid var(--line);border-radius:999px;background:#fafafa}
.pill:hover{background:#f3f4f6}
.pill.active{background:var(--brand-weak);border-color:color-mix(in srgb, var(--brand) 50%, #fff);font-weight:700}
/* Years matrix */
.ym-head{display:flex;align-items:center;justify-content:space-between;gap:8px;margin:4px 0 8px}
.ym-nav{border:1px solid #e5e7eb;border-radius:8px;background:#fff;padding:4px 8px;cursor:pointer}
.ym-nav:disabled{opacity:.5;cursor:not-allowed}
.ym-range{font-weight:600;color:#374151}
.year-matrix{display:flex;flex-direction:column;gap:6px}
.year-row{display:grid;grid-template-columns:repeat(5,1fr);gap:6px}
.year-cell{
  padding:6px 0;text-align:center;border:1px solid #e5e7eb;border-radius:8px;background:#fafafa;
  cursor:pointer;font-size:12px
}
.year-cell:hover{background:#f3f4f6}
.year-cell.active{background:#f59e0b;color:#fff;border-color:#f59e0b}
.year-cell.empty{visibility:hidden}
/* hidden input for native month polyfill (kept for accessibility) */
.month-hidden-input{position:absolute;width:1px;height:1px;padding:0;border:0;opacity:0;pointer-events:none}

/* ================= Chart layout helpers ================= */
.grid-row.top{display:grid;grid-template-columns:7fr 3fr;gap:12px}
.grid-row{display:grid;grid-template-columns:3fr 5fr;gap:12px}
.donut-card .donut-wrap{display:flex;justify-content:flex-end}
@media (max-width:740px){.grid-row.top,.grid-row{grid-template-columns:1fr}}
.chart-card{position:relative;z-index:2;overflow:visible}
.recharts-wrapper{pointer-events:auto}
.right-table.card{position:relative;z-index:1}

/* ================= Table + Pager ================= */
.right-table{height:calc(100vh - 160px);overflow:hidden}
.table-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:4px}
.pager{display:flex;align-items:center;gap:10px}
.pager .count{font-size:12px;color:#6b7280;white-space:nowrap}
.pager-buttons{display:flex;gap:6px}
.btn{cursor:pointer}
.btn.pager-btn{border:1px solid #e5e7eb;background:#f9fafb;color:#111827;border-radius:8px;padding:6px 8px;font-size:12px}
.btn.pager-btn:hover{background:#f3f4f6}
.btn.pager-btn:disabled{opacity:.5;cursor:not-allowed}

.table-scroll{height:calc(100% - 30px);overflow-y:auto}
.table{width:100%;border-collapse:separate;border-spacing:0}
.table th{position:sticky;top:0;background:#fff;z-index:1;box-shadow:0 1px 0 #e5e7eb;text-align:left;padding:8px;font-weight:600;font-size:12px;color:var(--muted)}
.table td{padding:8px;font-size:13px;border-top:1px solid var(--line);vertical-align:top}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
.title-cell,.venue-cell{overflow:hidden}
/* Clamp helpers */
.clamp-1,.clamp-2{display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}
.clamp-1{line-clamp:1;-webkit-line-clamp:1}
.clamp-2{line-clamp:2;-webkit-line-clamp:2}
.title-cell>.clamp-2{min-height:2.7em}
.venue-cell>.clamp-1{min-height:1.35em}

/* ================= Buttons ================= */
.btn.export{border:1px solid #e5e7eb;background:#111827;color:#fff;border-radius:10px;padding:8px 12px;font-size:13px}
.btn.export:hover{opacity:.92}

/* ================= Scrollbar polish (WebKit) ================= */
.table-scroll::-webkit-scrollbar{width:8px}
.table-scroll::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:999px}
.table-scroll::-webkit-scrollbar-thumb:hover{background:#9ca3af}

/* ================= PDF / capture tweaks ================= */
.wrap.exporting .table-scroll{scrollbar-width:none}
.wrap.exporting .table-scroll::-webkit-scrollbar{display:none}
.wrap.exporting{background:#fff}

/* ================= Dashboard-specific overrides ================= */

/* Hero / KPIs */
.hero.compact { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.kpis { display:flex; gap:8px; flex-wrap:wrap; }
.kpi { background:#fff; border:1px solid #eee; border-radius:10px; padding:6px 10px; }
.kpi-label { font-size:11px; opacity:.7; }
.kpi-value { font-weight:700; }
.logo { height:84px; width:auto; }

/* Two-column layout */
.two-col { display:grid; grid-template-columns: 9fr 5fr; gap:16px; align-items:start; }
@media (max-width: 1100px){ .two-col { grid-template-columns: 1fr; } }
.left-stack { display:flex; flex-direction:column; gap:12px; }

/* Filters */
.filters-row { display:grid; grid-template-columns: 1fr; gap:8px; padding:8px; }
.filter-combined { display:grid; grid-template-columns: minmax(320px,1.6fr) minmax(240px,1fr); gap:8px; align-items:center; }
@media (max-width: 980px){ .filter-combined { grid-template-columns:1fr; } }
.input-wrap { display:flex; align-items:center; gap:6px; border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; background:#fff; }
.input { border:none; outline:none; width:100%; background:transparent; }
.filters-row .chips-block { grid-column:1 / -1; }
.chips.tight { display:flex; flex-wrap:wrap; gap:6px; }
.chip { border:1px solid #e5e7eb; background:#f9fafb; border-radius:999px; padding:4px 8px; font-size:12px; }
.ymp-compact .hd, .ymp-compact .card>.hd { display:none !important; }

/* Cards */
.card { background:#fff; border:1px solid #eef2f7; border-radius:12px; padding:8px; }
h3.tight { margin:2px 0 6px; font-size:14px; }
.tip { border:none; }

/* Charts */
.chart-card { position:relative; z-index:2; overflow:visible; }
.recharts-wrapper { pointer-events:auto; }
.right-table.card { position:relative; z-index:1; }

/* Chart rows */
.grid-row.top { display:grid; grid-template-columns: 7fr 3fr; gap:12px; }
.grid-row { display:grid; grid-template-columns: 3fr 5fr; gap:12px; }
.donut-card .donut-wrap { display:flex; justify-content:flex-end; }
@media (max-width:740px){ .grid-row.top, .grid-row { grid-template-columns:1fr; } }

/* Table */
.right-table { height:calc(100vh - 160px); overflow:hidden; }
.table-header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:4px; }
.pager { display:flex; align-items:center; gap:10px; }
.pager .count { font-size:12px; color:#6b7280; white-space:nowrap; }
.pager-buttons { display:flex; gap:6px; }
.btn.pager-btn { border:1px solid #e5e7eb; background:#f9fafb; color:#111827; border-radius:8px; padding:6px 8px; font-size:12px; cursor:pointer; }
.btn.pager-btn:hover { background:#f3f4f6; }
.btn.pager-btn:disabled { opacity:.5; cursor:not-allowed; }

.table-scroll { height:calc(100% - 30px); overflow-y:auto; }
.table.pubs.compact th, .table.pubs.compact td { padding:8px 10px; }
.table.pubs.sticky thead th { position:sticky; top:0; background:#fff; z-index:1; box-shadow:0 1px 0 #e5e7eb; }

/* Buttons */
.btn.export { border:1px solid #e5e7eb; background:#111827; color:#fff; border-radius:10px; padding:8px 12px; font-size:13px; cursor:pointer; }
.btn.export:hover { opacity:.92; }

/* PDF Capture */
.wrap.exporting .table-scroll { scrollbar-width:none; }
.wrap.exporting .table-scroll::-webkit-scrollbar { display:none; }
.wrap.exporting { background:#fff; }

/* Compact Year&Month picker */
.filter-block { position: relative; }

.btn-dropdown {
  display: flex; align-items: center; justify-content: space-between;
  width: 100%; padding: 8px 12px; font-size: 14px;
  background: #fff; border: 1px solid var(--line); border-radius: 10px;
  cursor: pointer;
}
.btn-dropdown:hover { border-color: #d1d5db; }
.btn-dropdown .caret { opacity: .6; }

.popover {
  position: absolute; top: 100%; left: 0; right: 0; z-index: 1000;
  margin-top: 8px; padding: 10px; background: #fff;
  border: 1px solid var(--line); border-radius: var(--radius);
  box-shadow: var(--shadow); max-height: 60vh; overflow: auto;
}

.month-grid { display: flex; flex-wrap: wrap; gap: 6px; margin: 8px 0; }
.pill {
  padding: 6px 10px; font-size: 12px; cursor: pointer;
  border: 1px solid var(--line); border-radius: 999px; background: #fafafa;
}
.pill:hover { background: #f3f4f6; }
.pill.active {
  background: var(--brand-weak);
  border-color: color-mix(in srgb, var(--brand) 50%, #ffffff);
  font-weight: 700;
}

.ym-head { display: flex; align-items: center; justify-content: space-between; gap: 8px; margin-top: 8px; }
.ym-nav {
  border: 1px solid #e5e7eb; border-radius: 8px; background: #fff; padding: 4px 8px; cursor: pointer;
}
.ym-nav:disabled { opacity:.5; cursor:not-allowed; }

/* Hide any “Year & Month” label if you keep one in markup */
.ymp-compact .hd, .ymp-compact .card > .hd, .ymp-compact .filter-block > .hd { display: none !important; }